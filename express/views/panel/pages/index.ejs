<!DOCTYPE html>
<html lang="en">
<head>
    <title>Twitch Mod Squad - Panel Home</title>
<%- include("../partials/head") %>

    <link rel="stylesheet" href="/assets/css/panel/panel.css">
</head>
<body class="panel">
<%- include("../partials/header") %>

    <div class="sidebar-container">
        <%- include("../partials/sidebar", {active: "home"}) %>
        
        <main class="container container-md">
            <div class="col-4">
                <section>
                    <h2><i class="fa-brands fa-twitch"></i> Twitch Users</h2>
                    <% twitchUsers.forEach(user => { %>
                        <%- include("../partials/objects/twitchUser", {account: user, comma: comma, link: `/panel/user/${user._id}`}) %>
                    <% }) %>
                </section>
                <section>
                    <h2><i class="fa-brands fa-discord"></i> Discord Users</h2>
                    <% discordUsers.forEach(user => { %>
                        <%- include("../partials/objects/discordUser", {account: user, link: true}) %>
                    <% }) %>
                </section>
                <% if (discordUsers.length > 0) { %>
                <section>
                    <h2>TMS Guilds</h2>
                    <div class="community">
                        <img src="/assets/images/logos/logo-green.png" alt="Twitch Mod Squad Logo">
                        <div class="info">
                            <h3>
                                Twitch Mod Squad
                            </h3>
                            Main Mod Squad community for streamers which have over 5,000 followers or Twitch partnership and their moderators!
                        </div>
                        <div>
                            <% if (!joinedGuilds.inTMS) { %><button class="join tms" type="button">Join!</button><% } else { %><button class="join" type="button" disabled="disabled">Joined</button><% } %>
                        </div>
                    </div>
                    <div class="community">
                        <img src="/assets/images/logos/logo-blue.png" alt="The Little Mod Squad Logo">
                        <div class="info">
                            <h3>
                                The Little Mod Squad
                            </h3>
                            Sister community to The Mod Squad providing all streamers and their moderators a place to call home!
                        </div>
                        <div>
                            <% if (!joinedGuilds.inTLMS) { %><button class="join tlms" type="button">Join!</button><% } else { %><button class="join" type="button" disabled="disabled">Joined</button><% } %>
                        </div>
                    </div>
                    <div class="community">
                        <img src="/assets/images/logos/logo.png" alt="Community Lobbies Logo">
                        <div class="info">
                            <h3>
                                Community Lobbies
                            </h3>
                            Join or host lobbies within The Mod Squad and participating communities!
                        </div>
                        <div>
                            <% if (!joinedGuilds.inCL) { %><button class="join cl" type="button">Join!</button><% } else { %><button class="join" type="button" disabled="disabled">Joined</button><% } %>
                        </div>
                    </div>
                </section>
                <% } %>
            </div>
            <div class="col-4">
                <section>
                    <h2><i class="fa-solid fa-signal-stream"></i> Streamers</h2>
                    <% streamers.forEach(role => { %>
                        <%- include("../partials/objects/twitchUser", {account: role.streamer, comma: comma, link: `/panel/user/${role.streamer._id}`}) %>
                    <% }) %>
                </section>
            </div>
            <div class="col-4">
                <section>
                    <h2><img src="/assets/images/logos/logo_guy.png" alt="TMS Logo"> TMS Stats</h2>
                    <table>
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Value</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% stats.forEach(stat => { %>
                                <tr>
                                    <td><%= stat[0] %></td>
                                    <td><%= stat[1] %></td>
                                </tr>
                            <% }) %>
                        </tbody>
                    </table>
                </section>
            </div>
        </main>
    </div>
    
    <div class="notifications"></div>
<%- include("../partials/javascript") %>
<script src="/assets/js/join.js"> </script>
</body>
</html>
